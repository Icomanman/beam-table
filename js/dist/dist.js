(()=>{"use strict";const t={area:[201,314,490],rebars:[16,20,25],pcs:[2,3,4],link_spacs:[100,150,200],min_spac:30};const s=()=>{let t=!1;return jQuery("td").each((function(){const s=jQuery(this).find("input");if(0==s.length)return;const r=jQuery(this).find(".ui.dropdown");""===s.val()&&(jQuery(this).addClass("error"),r.addClass("error"),t=!0)})),t},r=()=>({data:function(){return{b_arr:[""],depths:[300,350,400,450,500,550,600,650,700,750,800],fys:[275],h_arr:[""],moment_results:[],run_done:!1,shear_results:[],table_rows:[1],trans_spac:[],widths:[250,300,350,400,450,500,550,600]}},filters:{roundOffSpac:function(t){return t.toFixed(0)},roundOffMoments:function(t){return t>0?`${t.toFixed(1)} kNm`:"0"},roundOffShears:function(t){return t>0?`${t.toFixed(1)} kN`:"0"}},methods:{addZeroResults:function(){this.moment_results=this.b_arr.map((t=>[])),this.b_arr.forEach(((s,r)=>{t.rebars.forEach((s=>{t.pcs.forEach((t=>{this.moment_results[r].push(0)}))}))})),this.shear_results=this.b_arr.map((t=>[])),this.b_arr.forEach(((s,r)=>{t.link_spacs.forEach((t=>{this.shear_results[r].push(0)}))}))},removeErr:function(t){(t=>{const s=jQuery(`#${t}`);s.removeClass("error"),s.find(".ui.dropdown").removeClass("error")})(t)},runCalc:function(r){if(!s()&&!(t=>{let s=!1;const r=Object.keys(t);return r.length<4||(r.filter((s=>(t[s]=parseFloat(t[s]),isNaN(t[s])))).length>0&&(s=!0),s)})(r)){const{fc:s,fy:n,links:e,cc:a}=r;this.trans_spac=function(s,r,n){const{pcs:e,rebars:a}=t,i=s.map((t=>[]));return s.forEach(((t,s)=>{a.forEach((a=>{e.forEach((e=>{i[s].push((t-2*(r+n)-a*e)/(e-1))}))}))})),i}(this.b_arr,a,e);const i={b_arr:this.b_arr,h_arr:this.h_arr,cc:a,links:e,trans_spac:this.trans_spac},{eff_depths:o,moment_results:d}=function(s,r,n){const{area:e,pcs:a,rebars:i}=t,{b_arr:o,h_arr:d,cc:c,links:l}=n,h=o.map((t=>[])),p=[];return o.forEach(((t,n)=>{i.forEach(((t,i)=>{a.forEach((a=>{const{depth:u,Mu:f}=((t,s,r,n,e)=>{const{As:a,pc:i,cc:o,links:d,rebar:c}=e,l=parseFloat(n)-(o+d+c/2),h=((t,s)=>t*s)(a,i);return{depth:l,Mu:.9*h*s*(l-h*s/(.85*t*parseFloat(r))/2)/1e6}})(s,r,o[n],d[n],{As:e[i],pc:a,cc:c,links:l,rebar:t});h[n].push(f),p[n]=u}))}))})),{eff_depths:p,moment_results:h}}(s,n,i);this.moment_results=d,this.shear_results=function(s,r,n,e){const{link_spacs:a}=t,{b_arr:i,h_arr:o,cc:d,links:c}=e,l=r.map((t=>[])),h=[],p=.25*Math.PI*c**2;return r.forEach(((t,r)=>{h[r]=.17*s**.5*parseFloat(i[r])*n[r],a.forEach((s=>{const e=((t,s,r,n)=>2*n*t*s/r)(t,n[r],s,p);l[r].push(.75*(h[r]+e)/1e3)}))})),l}(s,this.fys,o,i),this.run_done=!0}}},mounted:function(){jQuery(".ui.dropdown").dropdown(),this.addZeroResults(),ACI.v_EVENT.$on("add_row",(t=>{const s=this.table_rows[this.table_rows.length-1];s<0||!s?(this.table_rows.push(1),this.b_arr.push(null),this.h_arr.push(null),this.$nextTick((()=>{jQuery("#fys-selection-1").dropdown(),jQuery("#b-selection-1").dropdown(),jQuery("#h-selection-1").dropdown()}))):(this.table_rows.push(s+1),this.b_arr.push(""),this.h_arr.push(""),this.$nextTick((()=>{jQuery(`#fys-selection-${s+1}`).dropdown(),jQuery(`#b-selection-${s+1}`).dropdown(),jQuery(`#h-selection-${s+1}`).dropdown()}))),this.fys.push(275),this.addZeroResults()})),ACI.v_EVENT.$on("delete_row",(t=>{this.table_rows.pop(),this.trans_spac.pop(),this.moment_results.pop(),this.b_arr.pop(),this.h_arr.pop()})),ACI.v_EVENT.$on("run",(t=>{this.runCalc(t)}))},props:{passed:Object},template:'\n        <tbody>\n            <template v-for="(row, i) in table_rows">\n                <tr :id="\'spacing-\' + row" v-show="trans_spac[i]" class="center aligned" :key="row">\n                    <td colspan="2">Spacing</td>\n                    <td v-for="spac in trans_spac[i]" :class="{ error : spac < 30 }">\n                        {{spac | roundOffSpac}} mm\n                    </td>\n                    <td colspan="4">-</td>\n                </tr>\n                <tr :id="\'results-\' + i" class="center aligned" :key="row" :class="{ grey : run_done }">\n                    <td :id="\'td-b\' + i">\n                        <div :id="\'b-selection-\' + (i + 1)" class="ui inline dropdown">\n                        <input type="hidden" :name="\'b\' + row" v-model.lazy="b_arr[i]" @change="removeErr(\'td-b\' + i)">\n                        <div class="default text">Select</div>\n                        <div class="menu">\n                            <div class="item" v-for="width in widths" :data-value="width">{{width}}</div>\n                        </div>\n                        </div>\n                    </td>\n                    <td :id="\'td-h\' + i">\n                        <div :id="\'h-selection-\' + (i + 1)" class="ui inline dropdown">\n                        <input type="hidden" :name="\'h\' + row" v-model.lazy="h_arr[i]" @change="removeErr(\'td-h\' + i)">\n                        <div class="default text">Select</div>\n                        <div class="menu">\n                            <div class="item" v-for="depth in depths" :data-value="depth">{{depth}}</div>\n                        </div>\n                        </div>\n                    </td>\n                    <td v-for="result in moment_results[i]">{{result | roundOffMoments}}</td>\n                    <td v-for="result in shear_results[i]">{{result | roundOffShears}}</td>\n                    <td>\n                        <div :id="\'fys-selection-\' + (i + 1)" class="ui inline dropdown fys">\n                        <input type="hidden" :name="\'fys\' + row" v-model.lazy="fys[i]">\n                        <div class="text">Select</div>\n                        <div class="menu">\n                            <div class="active item" :data-value="275">275</div>\n                            <div class="item" :data-value="414">414</div>\n                        </div>\n                        </div>\n                    </td>\n                </tr>\n            </template>\n        </tbody>\n        '});ACI.UI.tableBody=function(){return{components:{table_row:r()},data:function(){return{rebars:t.rebars,pcs:t.pcs,link_spacs:t.link_spacs}},mounted:function(){ACI.v_EVENT.$on("add_row",(t=>{}))},template:'\n        <table id="table-app" class="ui celled structured table">\n            <thead>\n            <tr class="center aligned">\n                <th rowspan="1" colspan="2">Beam Size</th>\n                <th rowspan="1" colspan="9">Rebar and Bending Moment Capacity, &phi; = 0.90</th>\n                <th rowspan="1" colspan="4">Shear Capacity, &phi; = 0.75</th>\n            </tr>\n            <tr class="small-font center aligned">\n                <th>b<br>mm</th>\n                <th>h<br>mm</th>\n                <template v-for="(rebar,i) in rebars">\n                    <th v-for="pc in pcs">{{pc}} - {{rebars[i]}}mm</th>\n                </template>\n                <th v-for="link_spac in link_spacs">{{link_spac}} mm</th>\n                <th>fy<sub>s</sub> (MPa)</th>\n            </tr>\n            </thead>\n            <table_row :passed="{rebars, pcs, link_spacs}"/>\n        </table>\n        '}}})();
//# sourceMappingURL=dist.js.map