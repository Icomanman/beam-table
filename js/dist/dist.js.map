{"version":3,"file":"dist.js","mappings":"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","sources":["webpack:///./js/app.mjs","webpack:///./js/components.mjs","webpack:///./js/loader.mjs"],"sourcesContent":["\nconst Ast = (As, pcs) => As * pcs;\n\nconst momentCapacity = (fc, fy, b, h, bar_data) => {\n    const { As, pc, cc, links, rebar } = bar_data;\n    const depth = parseFloat(h) - (cc + links + (rebar / 2));\n    const total_As = Ast(As, pc);\n    const a = total_As * fy / (0.85 * fc * parseFloat(b));\n    const Mu = 0.9 * total_As * fy * (depth - (a / 2)) / 1000000;\n    return { depth, Mu };\n};\n\nexport const rebar_data = {\n    area: [201, 314, 490],\n    rebars: [16, 20, 25],\n    pcs: [2, 3, 4],\n    link_spacs: [100, 150, 200],\n    min_spac: 30\n};\n\nexport function calcBending(fc, fy, moment_data) {\n    const { area, pcs, rebars } = rebar_data;\n    const { b_arr, h_arr, cc, links } = moment_data;\n    const moment_results = b_arr.map(b => []);\n    const eff_depths = [];\n    b_arr.forEach((b, i) => {\n        rebars.forEach((rebar, j) => {\n            pcs.forEach(pc => {\n                const { depth, Mu } = momentCapacity(fc, fy, b_arr[i], h_arr[i], { As: area[j], pc, cc, links, rebar });\n                moment_results[i].push(Mu);\n                eff_depths[i] = depth;\n            });\n        });\n    });\n    return { eff_depths, moment_results };\n}\n\nexport function calcShears(fc, fys, eff_depths, moment_data) {\n    const { link_spacs } = rebar_data;\n    const { b_arr, h_arr, cc, links } = moment_data;\n    const shear_results = fys.map(b => []);\n    const vc = [];\n    const link_As = 0.25 * Math.PI * links ** 2;\n    const vs = (fys, depth, link_spac, link_As) => 2 * link_As * fys * depth / link_spac;\n    fys.forEach((fy, i) => {\n        vc[i] = 0.17 * (fc ** 0.5) * parseFloat(b_arr[i]) * eff_depths[i];\n        link_spacs.forEach(spac => {\n            const link_shear = vs(fy, eff_depths[i], spac, link_As);\n            shear_results[i].push(0.75 * (vc[i] + link_shear) / 1000);\n        });\n    });\n    return shear_results;\n}\n\nexport function calcSpacing(b_arr, cc, links) {\n    const { pcs, rebars } = rebar_data;\n    const trans_spac = b_arr.map(b => []);\n    b_arr.forEach((b, i) => {\n        rebars.forEach(bar => {\n            pcs.forEach(pc => {\n                trans_spac[i].push((b - 2 * (cc + links) - (bar * pc)) / (pc - 1));\n            });\n        });\n    });\n    return trans_spac;\n}","\nimport { calcBending, calcShears, calcSpacing, rebar_data } from \"./app.mjs\";\n\nconst checkFields = () => {\n    let has_err = false;\n    jQuery('td').each(function () {\n        const input = jQuery(this).find('input');\n        if (input.length == 0) return;\n        const dropdown = jQuery(this).find('.ui.dropdown');\n        if (input.val() === '') {\n            jQuery(this).addClass('error');\n            dropdown.addClass('error');\n            has_err = true;\n        }\n    });\n    return has_err;\n};\n\nconst checkProps = dat => {\n    let has_err = false;\n    // extract and validate (additional check) data from props:\n    const fields = Object.keys(dat);\n    if (fields.length < 4) return true;\n    else {\n        var nans = fields.filter(field => {\n            dat[field] = parseFloat(dat[field]);\n            return isNaN(dat[field]);\n        });\n    }\n    if (nans.length > 0) has_err = true;\n    return has_err;\n}\n\nconst removeErrorClass = id => {\n    const td = jQuery(`#${id}`);\n    td.removeClass('error');\n    td.find('.ui.dropdown').removeClass('error');\n};\n\nconst tableRow = () => {\n    const comp_options = {\n        data: function () {\n            return {\n                b_arr: [''],\n                depths: [300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800],\n                fys: [275],\n                h_arr: [''],\n                moment_results: [],\n                run_done: false,\n                shear_results: [],\n                table_rows: [1],\n                trans_spac: [],\n                widths: [250, 300, 350, 400, 450, 500, 550, 600]\n            }\n        },\n        filters: {\n            roundOffSpac: function (val) {\n                // return val >= rebar_data.min_spac ? val.toFixed(0) : '< 30';\n                return val.toFixed(0);\n            },\n            roundOffMoments: function (val) {\n                return val > 0 ? `${val.toFixed(1)} kNm` : '0';\n            },\n            roundOffShears: function (val) {\n                return val > 0 ? `${val.toFixed(1)} kN` : '0';\n            }\n        },\n        methods: {\n            addZeroResults: function () {\n                // M\n                this.moment_results = (this.b_arr).map(b => []);\n                (this.b_arr).forEach((b, i) => {\n                    (rebar_data.rebars).forEach((bar) => {\n                        (rebar_data.pcs).forEach(pc => {\n                            (this.moment_results[i]).push(0);\n                        });\n                    })\n                });\n                // V\n                this.shear_results = (this.b_arr).map(b => []);\n                (this.b_arr).forEach((b, i) => {\n                    (rebar_data.link_spacs).forEach((bar) => {\n                        (this.shear_results[i]).push(0);\n                    })\n                });\n            },\n            removeErr: function (id) {\n                removeErrorClass(id);\n            },\n            runCalc: function (dat) {\n                if (!checkFields() && !checkProps(dat)) {\n                    const { fc, fy, links, cc } = dat;\n                    this.trans_spac = calcSpacing(this.b_arr, cc, links);\n                    const b_arr = this.b_arr;\n                    const h_arr = this.h_arr;\n                    const moment_data = { b_arr, h_arr, cc, links, trans_spac: this.trans_spac }\n                    const { eff_depths, moment_results } = calcBending(fc, fy, moment_data);\n                    this.moment_results = moment_results;\n                    this.shear_results = calcShears(fc, this.fys, eff_depths, moment_data);\n                    this.run_done = true;\n                };\n                // row color to change to #e8e8e8\n                // else alert('err');\n            }\n        },\n        mounted: function () {\n            jQuery('.ui.dropdown').dropdown();\n            // init the results for empty rows:\n            this.addZeroResults();\n            ACI.v_EVENT.$on('add_row', dat => {\n                const last_no = this.table_rows[(this.table_rows).length - 1];\n                if (last_no < 0 || !last_no) {\n                    (this.table_rows).push(1);\n                    (this.b_arr).push(null);\n                    (this.h_arr).push(null);\n                    this.$nextTick(() => {\n                        jQuery('#fys-selection-1').dropdown();\n                        jQuery('#b-selection-1').dropdown();\n                        jQuery('#h-selection-1').dropdown();\n                    });\n\n                } else {\n                    (this.table_rows).push(last_no + 1);\n                    (this.b_arr).push('');\n                    (this.h_arr).push('');\n                    // activate the dropdowns within the next tick:\n                    this.$nextTick(() => {\n                        jQuery(`#fys-selection-${last_no + 1}`).dropdown();\n                        jQuery(`#b-selection-${last_no + 1}`).dropdown();\n                        jQuery(`#h-selection-${last_no + 1}`).dropdown();\n                    });\n                }\n                (this.fys).push(275);\n                this.addZeroResults();\n            });\n            ACI.v_EVENT.$on('delete_row', dat => {\n                (this.table_rows).pop();\n                (this.trans_spac).pop();\n                (this.moment_results).pop();\n                (this.b_arr).pop();\n                (this.h_arr).pop();\n            });\n            ACI.v_EVENT.$on('run', dat => {\n                this.runCalc(dat);\n            });\n        },\n        props: {\n            passed: Object\n        },\n        template: `\n        <tbody>\n            <template v-for=\"(row, i) in table_rows\">\n                <tr :id=\"'spacing-' + row\" v-show=\"trans_spac[i]\" class=\"center aligned\" :key=\"row\">\n                    <td colspan=\"2\">Spacing</td>\n                    <td v-for=\"spac in trans_spac[i]\" :class=\"{ error : spac < 30 }\">\n                        {{spac | roundOffSpac}} mm\n                    </td>\n                    <td colspan=\"4\">-</td>\n                </tr>\n                <tr :id=\"'results-' + i\" class=\"center aligned\" :key=\"row\" :class=\"{ grey : run_done }\">\n                    <td :id=\"'td-b' + i\">\n                        <div :id=\"'b-selection-' + (i + 1)\" class=\"ui inline dropdown\">\n                        <input type=\"hidden\" :name=\"'b' + row\" v-model.lazy=\"b_arr[i]\" @change=\"removeErr('td-b' + i)\">\n                        <div class=\"default text\">Select</div>\n                        <div class=\"menu\">\n                            <div class=\"item\" v-for=\"width in widths\" :data-value=\"width\">{{width}}</div>\n                        </div>\n                        </div>\n                    </td>\n                    <td :id=\"'td-h' + i\">\n                        <div :id=\"'h-selection-' + (i + 1)\" class=\"ui inline dropdown\">\n                        <input type=\"hidden\" :name=\"'h' + row\" v-model.lazy=\"h_arr[i]\" @change=\"removeErr('td-h' + i)\">\n                        <div class=\"default text\">Select</div>\n                        <div class=\"menu\">\n                            <div class=\"item\" v-for=\"depth in depths\" :data-value=\"depth\">{{depth}}</div>\n                        </div>\n                        </div>\n                    </td>\n                    <td v-for=\"result in moment_results[i]\">{{result | roundOffMoments}}</td>\n                    <td v-for=\"result in shear_results[i]\">{{result | roundOffShears}}</td>\n                    <td>\n                        <div :id=\"'fys-selection-' + (i + 1)\" class=\"ui inline dropdown fys\">\n                        <input type=\"hidden\" :name=\"'fys' + row\" v-model.lazy=\"fys[i]\">\n                        <div class=\"text\">Select</div>\n                        <div class=\"menu\">\n                            <div class=\"active item\" :data-value=\"275\">275</div>\n                            <div class=\"item\" :data-value=\"414\">414</div>\n                        </div>\n                        </div>\n                    </td>\n                </tr>\n            </template>\n        </tbody>\n        `\n    };\n    return comp_options;\n};\n\nexport function tableBody() {\n    const comp_options = {\n        components: {\n            table_row: tableRow()\n        },\n        data: function () {\n            return {\n                rebars: rebar_data.rebars,\n                pcs: rebar_data.pcs,\n                link_spacs: rebar_data.link_spacs\n            }\n        },\n        mounted: function () {\n            ACI.v_EVENT.$on('add_row', evt => {\n\n            });\n        },\n        template: `\n        <table id=\"table-app\" class=\"ui celled structured table\">\n            <thead>\n            <tr class=\"center aligned\">\n                <th rowspan=\"1\" colspan=\"2\">Beam Size</th>\n                <th rowspan=\"1\" colspan=\"9\">Rebar and Bending Moment Capacity, &phi; = 0.90</th>\n                <th rowspan=\"1\" colspan=\"4\">Shear Capacity, &phi; = 0.75</th>\n            </tr>\n            <tr class=\"small-font center aligned\">\n                <th>b<br>mm</th>\n                <th>h<br>mm</th>\n                <template v-for=\"(rebar,i) in rebars\">\n                    <th v-for=\"pc in pcs\">{{pc}} - {{rebars[i]}}mm</th>\n                </template>\n                <th v-for=\"link_spac in link_spacs\">{{link_spac}} mm</th>\n                <th>fy<sub>s</sub> (MPa)</th>\n            </tr>\n            </thead>\n            <table_row :passed=\"{rebars, pcs, link_spacs}\"/>\n        </table>\n        `\n    };\n    return comp_options;\n};","\nimport { tableBody } from './components.mjs';\n\nACI.UI.tableBody = tableBody;"],"names":["rebar_data","area","rebars","pcs","link_spacs","min_spac","checkFields","has_err","jQuery","each","input","this","find","length","dropdown","val","addClass","tableRow","data","b_arr","depths","fys","h_arr","moment_results","run_done","shear_results","table_rows","trans_spac","widths","filters","roundOffSpac","toFixed","roundOffMoments","roundOffShears","methods","addZeroResults","map","b","forEach","i","bar","pc","push","removeErr","id","td","removeClass","removeErrorClass","runCalc","dat","fields","Object","keys","filter","field","parseFloat","isNaN","checkProps","fc","fy","links","cc","calcSpacing","moment_data","eff_depths","rebar","j","depth","Mu","h","bar_data","As","total_As","Ast","momentCapacity","calcBending","vc","link_As","Math","PI","spac","link_shear","link_spac","vs","calcShears","mounted","ACI","v_EVENT","$on","last_no","$nextTick","pop","props","passed","template","UI","tableBody","components","table_row","evt"],"sourceRoot":""}